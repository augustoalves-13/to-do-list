import { toast } from 'react-toastify'
import './index.scss'
import { useState } from 'react'
import { DeleteTaskFromId } from '../../api/tarefas'

const TaskContainer = ({ item: { id, titulo, conteudo } }) => {
   const [edit, setEdit] = useState(false)
   const [container, setContainer] = useState(false)

   const DeletarTarefa = async (id) => {
      try {
         const resp = await DeleteTaskFromId(id)
         toast.success('ðŸš€ Task Deletada com sucesso')
      } catch (err) {
         toast.error(err.response.data.erro)
      }
   }

   function onClose(){
      setContainer(false)
   }

   return (
      <div onClick={() => { setContainer(true) }} className={`card-container  ${container ? 'modal-task' : 'card-task'}`} onMouseLeave={() => { setEdit(false) }} onMouseEnter={() => setEdit(true)}>

         {container != false &&
            <div className="top-container">
               <div className='date'>
                  <p>26/11</p>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" viewBox="0 0 20 19" fill="none">
                     <path d="M5.673 0C5.85865 0 6.0367 0.0700623 6.16797 0.194774C6.29925 0.319486 6.373 0.488631 6.373 0.665V1.90855H13.89V0.67355C13.89 0.497181 13.9637 0.328036 14.095 0.203324C14.2263 0.0786123 14.4043 0.00855 14.59 0.00855C14.7757 0.00855 14.9537 0.0786123 15.085 0.203324C15.2162 0.328036 15.29 0.497181 15.29 0.67355V1.90855H18C18.5303 1.90855 19.0388 2.1086 19.4139 2.46471C19.7889 2.82082 19.9997 3.30385 20 3.8076V17.1009C19.9997 17.6047 19.7889 18.0877 19.4139 18.4438C19.0388 18.8 18.5303 19 18 19H2C1.46974 19 0.961184 18.8 0.58614 18.4438C0.211096 18.0877 0.00026513 17.6047 0 17.1009L0 3.8076C0.00026513 3.30385 0.211096 2.82082 0.58614 2.46471C0.961184 2.1086 1.46974 1.90855 2 1.90855H4.973V0.66405C4.97327 0.487846 5.04713 0.318944 5.17838 0.194438C5.30963 0.0699317 5.48752 -1.798e-07 5.673 0ZM1.4 7.3549V17.1009C1.4 17.1758 1.41552 17.2499 1.44567 17.3191C1.47583 17.3882 1.52002 17.4511 1.57574 17.504C1.63145 17.5569 1.69759 17.5989 1.77039 17.6276C1.84319 17.6562 1.92121 17.6709 2 17.6709H18C18.0788 17.6709 18.1568 17.6562 18.2296 17.6276C18.3024 17.5989 18.3685 17.5569 18.4243 17.504C18.48 17.4511 18.5242 17.3882 18.5543 17.3191C18.5845 17.2499 18.6 17.1758 18.6 17.1009V7.3682L1.4 7.3549ZM6.667 13.8881V15.4707H5V13.8881H6.667ZM10.833 13.8881V15.4707H9.167V13.8881H10.833ZM15 13.8881V15.4707H13.333V13.8881H15ZM6.667 10.1099V11.6926H5V10.1099H6.667ZM10.833 10.1099V11.6926H9.167V10.1099H10.833ZM15 10.1099V11.6926H13.333V10.1099H15ZM4.973 3.2376H2C1.92121 3.2376 1.84319 3.25234 1.77039 3.28099C1.69759 3.30963 1.63145 3.35162 1.57574 3.40455C1.52002 3.45748 1.47583 3.52031 1.44567 3.58947C1.41552 3.65863 1.4 3.73275 1.4 3.8076V6.02585L18.6 6.03915V3.8076C18.6 3.73275 18.5845 3.65863 18.5543 3.58947C18.5242 3.52031 18.48 3.45748 18.4243 3.40455C18.3685 3.35162 18.3024 3.30963 18.2296 3.28099C18.1568 3.25234 18.0788 3.2376 18 3.2376H15.29V4.12015C15.29 4.29652 15.2162 4.46566 15.085 4.59038C14.9537 4.71509 14.7757 4.78515 14.59 4.78515C14.4043 4.78515 14.2263 4.71509 14.095 4.59038C13.9637 4.46566 13.89 4.29652 13.89 4.12015V3.2376H6.373V4.1116C6.373 4.28797 6.29925 4.45711 6.16797 4.58183C6.0367 4.70654 5.85865 4.7766 5.673 4.7766C5.48735 4.7766 5.3093 4.70654 5.17803 4.58183C5.04675 4.45711 4.973 4.28797 4.973 4.1116V3.2376Z" fill="white" />
                  </svg>
               </div>
               <div className='title'>
                  <h1>{titulo}</h1>
               </div>
               <button onClick={()=>{toast.success(container) ;   setContainer(false) ; }}>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                     <path d="M19.5459 17.954C19.7572 18.1654 19.876 18.452 19.876 18.7509C19.876 19.0498 19.7572 19.3364 19.5459 19.5478C19.3346 19.7591 19.0479 19.8779 18.749 19.8779C18.4501 19.8779 18.1635 19.7591 17.9521 19.5478L12 13.5937L6.0459 19.5459C5.83455 19.7573 5.54791 19.876 5.24902 19.876C4.95014 19.876 4.66349 19.7573 4.45215 19.5459C4.2408 19.3346 4.12207 19.0479 4.12207 18.749C4.12207 18.4502 4.2408 18.1635 4.45215 17.9522L10.4062 12L4.45402 6.04592C4.24268 5.83457 4.12395 5.54793 4.12395 5.24904C4.12395 4.95016 4.24268 4.66351 4.45402 4.45217C4.66537 4.24082 4.95201 4.12209 5.2509 4.12209C5.54978 4.12209 5.83643 4.24082 6.04777 4.45217L12 10.4062L17.954 4.45123C18.1654 4.23989 18.452 4.12115 18.7509 4.12115C19.0498 4.12115 19.3364 4.23989 19.5478 4.45123C19.7591 4.66258 19.8778 4.94922 19.8778 5.24811C19.8778 5.54699 19.7591 5.83364 19.5478 6.04498L13.5937 12L19.5459 17.954Z" fill="#252525" />
                  </svg>
               </button>
            </div>
         }

         {!container &&
            <>
               <div className="title-view">
                  <div className='date'>
                     <p>26/11</p>
                     <svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" viewBox="0 0 20 19" fill="none">
                        <path d="M5.673 0C5.85865 0 6.0367 0.0700623 6.16797 0.194774C6.29925 0.319486 6.373 0.488631 6.373 0.665V1.90855H13.89V0.67355C13.89 0.497181 13.9637 0.328036 14.095 0.203324C14.2263 0.0786123 14.4043 0.00855 14.59 0.00855C14.7757 0.00855 14.9537 0.0786123 15.085 0.203324C15.2162 0.328036 15.29 0.497181 15.29 0.67355V1.90855H18C18.5303 1.90855 19.0388 2.1086 19.4139 2.46471C19.7889 2.82082 19.9997 3.30385 20 3.8076V17.1009C19.9997 17.6047 19.7889 18.0877 19.4139 18.4438C19.0388 18.8 18.5303 19 18 19H2C1.46974 19 0.961184 18.8 0.58614 18.4438C0.211096 18.0877 0.00026513 17.6047 0 17.1009L0 3.8076C0.00026513 3.30385 0.211096 2.82082 0.58614 2.46471C0.961184 2.1086 1.46974 1.90855 2 1.90855H4.973V0.66405C4.97327 0.487846 5.04713 0.318944 5.17838 0.194438C5.30963 0.0699317 5.48752 -1.798e-07 5.673 0ZM1.4 7.3549V17.1009C1.4 17.1758 1.41552 17.2499 1.44567 17.3191C1.47583 17.3882 1.52002 17.4511 1.57574 17.504C1.63145 17.5569 1.69759 17.5989 1.77039 17.6276C1.84319 17.6562 1.92121 17.6709 2 17.6709H18C18.0788 17.6709 18.1568 17.6562 18.2296 17.6276C18.3024 17.5989 18.3685 17.5569 18.4243 17.504C18.48 17.4511 18.5242 17.3882 18.5543 17.3191C18.5845 17.2499 18.6 17.1758 18.6 17.1009V7.3682L1.4 7.3549ZM6.667 13.8881V15.4707H5V13.8881H6.667ZM10.833 13.8881V15.4707H9.167V13.8881H10.833ZM15 13.8881V15.4707H13.333V13.8881H15ZM6.667 10.1099V11.6926H5V10.1099H6.667ZM10.833 10.1099V11.6926H9.167V10.1099H10.833ZM15 10.1099V11.6926H13.333V10.1099H15ZM4.973 3.2376H2C1.92121 3.2376 1.84319 3.25234 1.77039 3.28099C1.69759 3.30963 1.63145 3.35162 1.57574 3.40455C1.52002 3.45748 1.47583 3.52031 1.44567 3.58947C1.41552 3.65863 1.4 3.73275 1.4 3.8076V6.02585L18.6 6.03915V3.8076C18.6 3.73275 18.5845 3.65863 18.5543 3.58947C18.5242 3.52031 18.48 3.45748 18.4243 3.40455C18.3685 3.35162 18.3024 3.30963 18.2296 3.28099C18.1568 3.25234 18.0788 3.2376 18 3.2376H15.29V4.12015C15.29 4.29652 15.2162 4.46566 15.085 4.59038C14.9537 4.71509 14.7757 4.78515 14.59 4.78515C14.4043 4.78515 14.2263 4.71509 14.095 4.59038C13.9637 4.46566 13.89 4.29652 13.89 4.12015V3.2376H6.373V4.1116C6.373 4.28797 6.29925 4.45711 6.16797 4.58183C6.0367 4.70654 5.85865 4.7766 5.673 4.7766C5.48735 4.7766 5.3093 4.70654 5.17803 4.58183C5.04675 4.45711 4.973 4.28797 4.973 4.1116V3.2376Z" fill="white" />
                     </svg>
                  </div>
                  <h1>{titulo}</h1>

               </div>
               <div className='preview-task'>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                     <path d="M19 2H14.82C14.4 0.84 13.3 0 12 0C10.7 0 9.6 0.84 9.18 2H5C3.9 2 3 2.9 3 4V20C3 21.1 3.9 22 5 22H19C20.1 22 21 21.1 21 20V4C21 2.9 20.1 2 19 2ZM12 2C12.55 2 13 2.45 13 3C13 3.55 12.55 4 12 4C11.45 4 11 3.55 11 3C11 2.45 11.45 2 12 2ZM18 20H6C5.45 20 5 19.55 5 19V5C5 4.45 5.45 4 6 4H7V5C7 6.1 7.9 7 9 7H15C16.1 7 17 6.1 17 5V4H18C18.55 4 19 4.45 19 5V19C19 19.55 18.55 20 18 20Z" fill="#606060" />
                  </svg>
                  <p>{conteudo.slice(0, 21)}...</p>
               </div>
               <div className='preview-task'>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" viewBox="0 0 20 19" fill="none">
                     <path d="M5.673 0C5.85865 0 6.0367 0.0700623 6.16797 0.194774C6.29925 0.319486 6.373 0.488631 6.373 0.665V1.90855H13.89V0.67355C13.89 0.497181 13.9637 0.328036 14.095 0.203324C14.2263 0.0786123 14.4043 0.00855 14.59 0.00855C14.7757 0.00855 14.9537 0.0786123 15.085 0.203324C15.2162 0.328036 15.29 0.497181 15.29 0.67355V1.90855H18C18.5303 1.90855 19.0388 2.1086 19.4139 2.46471C19.7889 2.82082 19.9997 3.30385 20 3.8076V17.1009C19.9997 17.6047 19.7889 18.0877 19.4139 18.4438C19.0388 18.8 18.5303 19 18 19H2C1.46974 19 0.961184 18.8 0.58614 18.4438C0.211096 18.0877 0.00026513 17.6047 0 17.1009L0 3.8076C0.00026513 3.30385 0.211096 2.82082 0.58614 2.46471C0.961184 2.1086 1.46974 1.90855 2 1.90855H4.973V0.66405C4.97327 0.487846 5.04713 0.318944 5.17838 0.194438C5.30963 0.0699317 5.48752 -1.798e-07 5.673 0ZM1.4 7.3549V17.1009C1.4 17.1758 1.41552 17.2499 1.44567 17.3191C1.47583 17.3882 1.52002 17.4511 1.57574 17.504C1.63145 17.5569 1.69759 17.5989 1.77039 17.6276C1.84319 17.6562 1.92121 17.6709 2 17.6709H18C18.0788 17.6709 18.1568 17.6562 18.2296 17.6276C18.3024 17.5989 18.3685 17.5569 18.4243 17.504C18.48 17.4511 18.5242 17.3882 18.5543 17.3191C18.5845 17.2499 18.6 17.1758 18.6 17.1009V7.3682L1.4 7.3549ZM6.667 13.8881V15.4707H5V13.8881H6.667ZM10.833 13.8881V15.4707H9.167V13.8881H10.833ZM15 13.8881V15.4707H13.333V13.8881H15ZM6.667 10.1099V11.6926H5V10.1099H6.667ZM10.833 10.1099V11.6926H9.167V10.1099H10.833ZM15 10.1099V11.6926H13.333V10.1099H15ZM4.973 3.2376H2C1.92121 3.2376 1.84319 3.25234 1.77039 3.28099C1.69759 3.30963 1.63145 3.35162 1.57574 3.40455C1.52002 3.45748 1.47583 3.52031 1.44567 3.58947C1.41552 3.65863 1.4 3.73275 1.4 3.8076V6.02585L18.6 6.03915V3.8076C18.6 3.73275 18.5845 3.65863 18.5543 3.58947C18.5242 3.52031 18.48 3.45748 18.4243 3.40455C18.3685 3.35162 18.3024 3.30963 18.2296 3.28099C18.1568 3.25234 18.0788 3.2376 18 3.2376H15.29V4.12015C15.29 4.29652 15.2162 4.46566 15.085 4.59038C14.9537 4.71509 14.7757 4.78515 14.59 4.78515C14.4043 4.78515 14.2263 4.71509 14.095 4.59038C13.9637 4.46566 13.89 4.29652 13.89 4.12015V3.2376H6.373V4.1116C6.373 4.28797 6.29925 4.45711 6.16797 4.58183C6.0367 4.70654 5.85865 4.7766 5.673 4.7766C5.48735 4.7766 5.3093 4.70654 5.17803 4.58183C5.04675 4.45711 4.973 4.28797 4.973 4.1116V3.2376Z" fill="#606060" />
                  </svg>
                  <p>30/11</p>
               </div>
               <div className="btn-container">
                  {edit &&
                     <>
                        <svg onClick={() => {
                           toast.warning('NÃ£o criei essa funÃ§Ã£o ainda rapaziada')
                        }} xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                           <path d="M13.4983 0.794613L13.6465 0.646461C14.1179 0.175057 14.8822 0.175056 15.3536 0.646461C15.825 1.11787 15.825 1.88216 15.3536 2.35357L15.2054 2.50172C15.7315 3.09072 15.7119 3.99525 15.1465 4.56067L4.85356 14.8536C4.78948 14.9176 4.70919 14.9631 4.62128 14.9851L0.621278 15.9851C0.450891 16.0277 0.270647 15.9778 0.146457 15.8536C0.022267 15.7294 -0.0276575 15.5491 0.0149394 15.3787L1.01494 11.3787C1.03692 11.2908 1.08238 11.2105 1.14646 11.1465L10.7877 1.5052C10.5926 1.3676 10.321 1.3861 10.1465 1.56067L6.85356 4.85357C6.6583 5.04883 6.34172 5.04883 6.14646 4.85357C5.95119 4.65831 5.95119 4.34172 6.14646 4.14646L9.43935 0.853568C10.0053 0.287595 10.9111 0.268451 11.5 0.796139C12.0678 0.287434 12.9299 0.286925 13.4983 0.794613ZM12.8536 1.56067C12.6583 1.36541 12.3417 1.36541 12.1465 1.56067L1.95149 11.7556L1.18719 14.8128L4.24439 14.0485L14.4394 3.85357C14.6346 3.65831 14.6346 3.34172 14.4394 3.14646L12.8536 1.56067Z" fill="#606060" />
                        </svg>
                        <svg onClick={() => DeletarTarefa(id)} xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                           <path d="M5.5 5.5C5.77614 5.5 6 5.72386 6 6V12C6 12.2761 5.77614 12.5 5.5 12.5C5.22386 12.5 5 12.2761 5 12V6C5 5.72386 5.22386 5.5 5.5 5.5Z" fill="#606060" />
                           <path d="M8 5.5C8.27614 5.5 8.5 5.72386 8.5 6V12C8.5 12.2761 8.27614 12.5 8 12.5C7.72386 12.5 7.5 12.2761 7.5 12V6C7.5 5.72386 7.72386 5.5 8 5.5Z" fill="#606060" />
                           <path d="M11 6C11 5.72386 10.7761 5.5 10.5 5.5C10.2239 5.5 10 5.72386 10 6V12C10 12.2761 10.2239 12.5 10.5 12.5C10.7761 12.5 11 12.2761 11 12V6Z" fill="#606060" />
                           <path d="M14.5 3C14.5 3.55228 14.0523 4 13.5 4H13V13C13 14.1046 12.1046 15 11 15H5C3.89543 15 3 14.1046 3 13V4H2.5C1.94772 4 1.5 3.55228 1.5 3V2C1.5 1.44772 1.94772 1 2.5 1H6C6 0.447715 6.44772 0 7 0H9C9.55229 0 10 0.447715 10 1H13.5C14.0523 1 14.5 1.44772 14.5 2V3ZM4.11803 4L4 4.05902V13C4 13.5523 4.44772 14 5 14H11C11.5523 14 12 13.5523 12 13V4.05902L11.882 4H4.11803ZM2.5 3H13.5V2H2.5V3Z" fill="#606060" />
                        </svg>
                     </>
                  }
               </div>
            </>
         }
      </div>
   )
}

export default TaskContainer